import{r as t,j as e}from"./index-BonXIjnK.js";import{A as F}from"./aos-qFhLIK5-.js";import{F as b}from"./index.es-BS6_hyzh.js";import{R,S as D}from"./index-CokvSRJh.js";import{B as L,C as P,E as I,F as N}from"./api-CkpjlVvn.js";const M={Active:"bg-green-100 text-green-700",Suspended:"bg-red-100 text-red-700"},q=()=>{const[w,v]=t.useState([]),[n,p]=t.useState(null),[a,o]=t.useState(1),[S,z]=t.useState(""),[h,_]=t.useState("ALL"),[U,Q]=t.useState(!1),[d,m]=t.useState(!1),[i,u]=t.useState(!1),[g,k]=t.useState([]),y=localStorage.getItem("token");t.useEffect(()=>{F.init({duration:800,once:!0}),C()},[]);const C=async()=>{try{const s=await L();v(s)}catch(s){console.error("Failed to fetch users:",s.message)}},A=async s=>{try{const r=await P(s.id,y);p(r);const l=await I(s.id,y);k(l),m(r.suspended||!1),u(r.banned||!1)}catch(r){console.error("Error loading user details:",r)}},B=async()=>{try{await N(n.id,{suspended:!d}),m(!d)}catch(s){console.error("Error suspending user:",s)}},E=async()=>{try{await N(n.id,{banned:!i}),u(!i)}catch(s){console.error("Error banning user:",s)}},x=8,j=w.filter(s=>(h==="ALL"||s.status===h)&&s.name.toLowerCase().includes(S.toLowerCase())),c=Math.ceil(j.length/x),f=j.slice((a-1)*x,a*x);return e.jsxs("div",{className:"relative p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 hover:text-purple-600 hover:scale-105 transition",children:"User Management"}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-600",children:[e.jsx("thead",{className:"bg-gray-50 text-xs text-gray-500 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:f.length>0?f.map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition duration-300 cursor-pointer",onClick:()=>A(s),children:[e.jsx("td",{className:"px-6 py-4",children:s.name}),e.jsx("td",{className:"px-6 py-4",children:s.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${M[s.status]}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-purple-600 hover:underline",children:"View"})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"py-4 px-6 text-center text-gray-400",children:"No users found."})})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 text-sm text-gray-600 gap-3",children:[e.jsxs("span",{children:["Page ",a," of ",c]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 border rounded",disabled:a===1,onClick:()=>o(s=>Math.max(s-1,1)),children:"← Prev"}),[...Array(c)].map((s,r)=>{const l=r+1;return e.jsx("button",{onClick:()=>o(l),className:`px-3 py-1 border rounded ${a===l?"bg-purple-600 text-white":""}`,children:l},l)}),e.jsx("button",{className:"px-3 py-1 border rounded",disabled:a===c,onClick:()=>o(s=>Math.min(s+1,c)),children:"Next →"})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-40",onClick:()=>p(null)}),e.jsx("div",{className:"fixed top-0 right-0 w-full sm:max-w-md h-full bg-[#FAFCFE] z-50 shadow-lg transition-all duration-500 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("h3",{className:"text-lg font-bold",children:["User: ",n.name]}),U==="panel"&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white border shadow border-gray-200 rounded-md z-50 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(b,{icon:R}),e.jsx("span",{children:"Suspend User Account"})]}),e.jsxs("label",{className:"inline-flex relative items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:d,onChange:B}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-purple-600 transition-all duration-300"}),e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-5 transition-transform duration-300"})]})]}),e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-600",children:[e.jsx(b,{icon:D}),e.jsx("span",{children:"Ban User Account"})]}),e.jsxs("label",{className:"inline-flex relative items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:i,onChange:E}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-purple-600 transition-all duration-300"}),e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-5 transition-transform duration-300"})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-black mb-2 ml-2",children:"Reported Issues & Warnings"}),e.jsxs("table",{className:"min-w-full text-sm text-left border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:[e.jsx("th",{className:"py-2 px-2",children:"Reported By"}),e.jsx("th",{className:"py-2 px-2",children:"Date Reported"})]})}),e.jsx("tbody",{children:g.length>0?g.map((s,r)=>e.jsxs("tr",{className:"border-t border-gray-200",children:[e.jsx("td",{className:"py-2 px-2 text-gray-700",children:s.reported_by}),e.jsx("td",{className:"py-2 px-2 text-gray-600",children:new Date(s.date_reported).toLocaleString()})]},r)):e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"py-2 px-2 text-gray-500",children:"No reports found."})})})]})]})]})})]})]})};export{q as default};
