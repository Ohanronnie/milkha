import{r as a,u as y,d as w,j as e}from"./index-BonXIjnK.js";import{A as C}from"./aos-qFhLIK5-.js";import{F as l}from"./index.es-BS6_hyzh.js";import{x as F,H as S,I as k,h as A,J as M,i as E,B as P}from"./index-CokvSRJh.js";import{f as U,i as I}from"./api-CkpjlVvn.js";const H=()=>{const[d,n]=a.useState(!1),[i,u]=a.useState(!1),c=a.useRef(),r=y(),p=w(),[x,g]=a.useState({name:"",profilePic:""}),[b,v]=a.useState(0),[f,j]=a.useState(0);a.useEffect(()=>{C.init({duration:800,once:!0})},[]),a.useEffect(()=>{const s=async()=>{try{const t=await U();g({name:t.full_name||t.name||"User",profilePic:t.photo||"/images/default-avatar.png"})}catch(t){console.error("Failed to fetch user:",t.message)}},o=async()=>{try{const t=await I();v(t.unread_messages_count||0),j(t.unread_notifications_count||0)}catch(t){console.error("Failed to fetch activity feed:",t.message)}};s(),o();const N=setInterval(o,1e4);return()=>clearInterval(N)},[]),a.useEffect(()=>{const s=o=>{c.current&&!c.current.contains(o.target)&&n(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const m=[{icon:k,label:"Dashboard",route:"/dashboard"},{icon:A,label:"Search",route:"/search"},{icon:M,label:"Messages",route:"/messages",badge:b},{icon:E,label:"Profile",route:"/profile"}],h=s=>p.pathname===s;return e.jsxs("nav",{"data-aos":"fade-down","data-aos-delay":"100",className:"bg-[#A897FF] text-white py-4 px-6 flex items-center justify-between shadow-md rounded-t-2xl relative z-50",children:[e.jsx("img",{src:"/images/logoo.png",className:"w-36 h-23 cursor-pointer hover:scale-105 transition",alt:"Logo",onClick:()=>r("/dashboard")}),e.jsx("div",{className:"md:hidden",children:e.jsx(l,{icon:i?F:S,className:"text-2xl cursor-pointer",onClick:()=>u(!i)})}),e.jsx("div",{className:"hidden md:flex space-x-6","data-aos":"slide-left","data-aos-delay":"300",children:m.map((s,o)=>e.jsxs("div",{onClick:()=>r(s.route),className:`relative flex items-center gap-2 px-4 py-2 rounded-md cursor-pointer transition 
              ${h(s.route)?"bg-[#8C71F6] font-semibold scale-105":"hover:bg-[#8C71F6] hover:scale-103"}`,children:[e.jsx(l,{icon:s.icon,className:"text-base"}),e.jsx("span",{className:"text-sm font-light",children:s.label}),s.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-2 bg-red-500 text-white text-xs px-2 py-[1px] rounded-full",children:s.badge})]},o))}),e.jsxs("div",{className:"flex items-center space-x-4 relative",ref:c,children:[e.jsxs("div",{className:"relative cursor-pointer",onClick:()=>r("/notifications"),children:[e.jsx(l,{icon:P,className:"text-lg hover:text-white/80 transition"}),f>0&&e.jsx("span",{className:"absolute -top-1 -right-2 bg-red-500 text-white text-xs px-2 py-[1px] rounded-full",children:f})]}),e.jsxs("div",{onClick:()=>n(!d),className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("img",{src:x.profilePic,className:"w-8 h-8 rounded-full border hover:opacity-90 transition",alt:"Profile"}),e.jsx("span",{className:"text-sm font-medium",children:x.name})]}),d&&e.jsx("div",{className:"absolute right-0 top-14 w-48 bg-white rounded-lg shadow-lg z-50 text-sm text-gray-800",children:e.jsxs("ul",{className:"divide-y divide-gray-200",children:[e.jsx("li",{children:e.jsx("button",{className:"w-full text-left px-4 py-3 hover:bg-gray-100",onClick:()=>{r("/shortlisted"),n(!1)},children:"Shortlisted Profiles"})}),e.jsx("li",{children:e.jsx("button",{className:"w-full text-left px-4 py-3 hover:bg-gray-100",onClick:()=>{r("/settings"),n(!1)},children:"Settings"})}),e.jsx("li",{children:e.jsx("button",{className:"w-full text-left px-4 py-3 hover:bg-gray-100",children:"Help Center"})}),e.jsx("li",{children:e.jsx("button",{className:"w-full text-left px-4 py-3 text-red-600 hover:bg-red-100",onClick:()=>{localStorage.removeItem("token"),r("/login"),n(!1)},children:"Log Out"})})]})})]}),i&&e.jsx("div",{className:"absolute top-[70px] left-0 w-full bg-[#A897FF] text-white p-4 flex flex-col items-center gap-4 md:hidden z-40",children:m.map((s,o)=>e.jsxs("div",{onClick:()=>{r(s.route),u(!1)},className:`w-full text-center py-2 rounded-md transition ${h(s.route)?"bg-[#8C71F6] font-semibold":"hover:bg-[#8C71F6]"}`,children:[e.jsx(l,{icon:s.icon,className:"mr-2"}),s.label,s.badge>0&&e.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs px-2 py-[1px] rounded-full",children:s.badge})]},o))})]})};export{H as N};
