import{r as t,j as e}from"./index-BonXIjnK.js";import{A}from"./aos-qFhLIK5-.js";import{F as o}from"./index.es-BS6_hyzh.js";import{U as E,V as P,l as U,x as T,z as F,a as N,W as v,D as w}from"./index-CokvSRJh.js";import{k as C,t as D,H as I,p as M}from"./api-CkpjlVvn.js";const J=()=>{const[r,c]=t.useState("profile");return t.useEffect(()=>{A.init({duration:800,once:!0})},[]),e.jsxs("div",{className:"max-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{"data-aos":"slide-right","data-aos-delay":"300",className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold hover:text-purple-600 text-gray-800",children:"Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Control your profile & team settings"})]}),e.jsx("div",{"data-aos":"fade-up","data-aos-delay":"300",className:"flex gap-3 border-b border-gray-200 mb-6",children:["profile","users","password"].map(l=>e.jsx("button",{onClick:()=>c(l),className:`px-4 py-2 text-sm font-medium capitalize ${r===l?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-purple-600"}`,children:l},l))}),e.jsxs("div",{"data-aos":"fade-up","data-aos-delay":"300",className:"bg-white rounded-lg shadow p-6",children:[r==="profile"&&e.jsx(R,{}),r==="users"&&e.jsx(z,{}),r==="password"&&e.jsx(V,{})]})]})},R=()=>{const[r,c]=t.useState("/images/avatar.png"),[l,n]=t.useState(""),[b,m]=t.useState(""),[h,i]=t.useState(""),[d,x]=t.useState(""),[p,g]=t.useState("");t.useEffect(()=>{y()},[]);const y=async()=>{try{const a=await C("/admin/admins/");c(a.avatar||"/images/avatar.png"),n(a.name||""),m(a.email||""),i(a.avatar||"/images/avatar.png"),x(a.name||""),g(a.email||"")}catch(a){console.error("Failed to fetch profile:",a.message)}},s=()=>i(""),u=a=>{const j=a.target.files[0];if(j){const f=new FileReader;f.onloadend=()=>i(f.result),f.readAsDataURL(j)}},S=async()=>{try{await D("/admin/admins/",{name:d,email:p,avatar:h}),c(h),n(d),m(p),alert("Profile updated successfully!")}catch(a){console.error("Update failed:",a.message),alert("Update failed. Try again.")}},k=()=>{i(r),x(l),g(b)};return e.jsxs("div",{className:"w-full max-w-xl mx-auto space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Profile Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"These are your personal details"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:h||"/images/avatar-placeholder.png",className:"w-16 h-16 rounded-full object-cover border",alt:"Profile"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:s,className:"text-sm text-red-600 border border-red-300 px-3 py-1.5 rounded hover:bg-red-50 transition",children:"Remove"}),e.jsxs("label",{className:"text-sm text-gray-700 border border-gray-300 px-3 py-1.5 rounded hover:bg-gray-50 transition cursor-pointer",children:["Change",e.jsx("input",{type:"file",accept:"image/*",onChange:u,className:"hidden"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-400 -mt-4 ml-20",children:"Min 400x400px, PNG or JPEG"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-700 block",children:"Full Name"}),e.jsx("input",{type:"text",value:d,onChange:a=>x(a.target.value),className:"w-full border px-3 py-2 rounded border-gray-300 focus:outline-purple-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-700 block",children:"Email"}),e.jsx("input",{type:"email",value:p,onChange:a=>g(a.target.value),className:"w-full border px-3 py-2 rounded border-gray-300 focus:outline-purple-500 text-sm"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:k,className:"flex-1 px-4 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 transition",children:"Update Profile"})]})]})},z=()=>{const[r,c]=t.useState([]),[l,n]=t.useState(!1),[b,m]=t.useState(!1),[h,i]=t.useState(null),[d,x]=t.useState({name:"",email:""}),p=async()=>{try{const s=await C("/admin/users/");c(s||[])}catch(s){console.error("Error fetching users:",s.message)}};t.useEffect(()=>{p()},[]);const g=async()=>{try{await M("/admin/admins/",d),n(!1),x({name:"",email:""}),m(!0),p()}catch(s){console.error("Failed to add admin:",s.message)}},y=async s=>{try{await I(`/admin/users/${s}/`),m(!0),i(null),p()}catch(u){console.error("Failed to delete:",u.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded shadow p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Team Members"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Invite your colleagues to collaborate together."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm border border-gray-300 rounded hover:bg-gray-100 transition",children:[e.jsx(o,{icon:E}),"Export CSV"]}),e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm text-white bg-purple-600 rounded hover:bg-purple-700 transition",onClick:()=>n(!0),children:[e.jsx(o,{icon:P}),"Add new Admin"]})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-3 overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-gray-500 text-xs uppercase",children:[e.jsx("th",{className:"py-3 px-4 text-left",children:"Name"}),e.jsx("th",{className:"py-3 px-4",children:"Email"}),e.jsx("th",{className:"py-3 px-4",children:"Date Added"}),e.jsx("th",{className:"py-3 px-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(s=>{var u;return e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-300 relative",children:[e.jsxs("td",{className:"py-3 px-4 flex items-center gap-2",children:[e.jsx("img",{src:s.avatar||"/images/avatar.png",className:"w-8 h-8 rounded-full"}),e.jsx("span",{children:s.name})]}),e.jsx("td",{className:"py-3 px-4",children:s.email}),e.jsx("td",{className:"py-3 px-4",children:(u=s.created_at)==null?void 0:u.slice(0,10)}),e.jsxs("td",{className:"py-3 px-4 text-right",children:[e.jsx("button",{className:"border border-gray-300 rounded px-2 py-1 hover:bg-gray-100",onClick:()=>i(s.id),children:e.jsx(o,{icon:U})}),h===s.id&&e.jsxs("div",{className:"absolute right-10 mt-2 w-32 bg-white border shadow rounded z-50",children:[e.jsx("div",{className:"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer",onClick:()=>{i(null),m(!0)},children:"Edit"}),e.jsx("div",{className:"px-4 py-2 text-sm hover:bg-gray-100 text-red-600 cursor-pointer",onClick:()=>y(s.id),children:"Remove"})]})]})]},s.id)})})]})})]}),l&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow w-full max-w-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Add New Admin"}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx(o,{icon:T,className:"text-gray-500"})})]}),e.jsx("input",{type:"text",placeholder:"Full Name",value:d.name,onChange:s=>x({...d,name:s.target.value}),className:"w-full mb-3 border px-3 py-2 rounded text-sm border-gray-300"}),e.jsx("input",{type:"email",placeholder:"Email Address",value:d.email,onChange:s=>x({...d,email:s.target.value}),className:"w-full mb-3 border px-3 py-2 rounded text-sm border-gray-300"}),e.jsx("button",{className:"w-full bg-purple-600 text-white py-2 rounded hover:bg-purple-700",onClick:g,children:"Add Admin"})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow text-center w-full max-w-sm",children:[e.jsx(o,{icon:F,className:"text-green-500 text-3xl mb-2"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Success"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Action completed successfully."}),e.jsx("button",{className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",onClick:()=>m(!1),children:"Okay"})]})})]})},V=()=>{const[r,c]=t.useState(!1),[l,n]=t.useState(!1);return e.jsxs("div",{className:"w-full max-w-xl mx-auto space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Update Password"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enter your current password to update it."}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-sm text-gray-700 block mb-1",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{icon:N,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:r?"text":"password",className:"w-full border px-10 py-2 rounded border-gray-300 text-sm"}),e.jsx(o,{icon:r?v:w,className:"absolute right-3 top-3 text-gray-400 cursor-pointer",onClick:()=>c(!r)})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-sm text-gray-700 block mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{icon:N,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:l?"text":"password",className:"w-full border px-10 py-2 rounded border-gray-300 text-sm"}),e.jsx(o,{icon:l?v:w,className:"absolute right-3 top-3 text-gray-400 cursor-pointer",onClick:()=>n(!l)})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{className:"flex-1 px-4 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{className:"flex-1 px-4 py-2 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 transition",children:"Update Password"})]})]})};export{J as default};
