import{r as t,j as e}from"./index-BonXIjnK.js";import{A as S}from"./aos-qFhLIK5-.js";import{F as c}from"./index.es-BS6_hyzh.js";import{h as k,g as C,k as E,l as L,m as O}from"./index-CokvSRJh.js";import{N as P}from"./Navbar-DsNlk0xp.js";import{k as h}from"./api-CkpjlVvn.js";const W=()=>{const[g,f]=t.useState([]),[p,j]=t.useState([]),[a,y]=t.useState(null),[d,x]=t.useState(!1),[m,v]=t.useState(!1),[o,N]=t.useState(""),[n,b]=t.useState("recent"),i=t.useRef(null);t.useEffect(()=>{S.init({duration:800,once:!0}),(async()=>{try{const l=await h("/matchmaking/messages/unread/"),M=await h("/matchmaking/matches/unmessaged/");f(l),j(M)}catch(l){console.error("Error fetching messages:",l.message)}})();const r=l=>{i.current&&!i.current.contains(l.target)&&x(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const w=()=>x(!d),u=g.filter(s=>s.name.toLowerCase().includes(o.toLowerCase())||s.lastMessage.toLowerCase().includes(o.toLowerCase())).sort((s,r)=>n==="favorite"?r.unread-s.unread:n==="recent"?r.time.localeCompare(s.time):0);return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(P,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_2fr] gap-6 px-10 py-6","data-aos":"fade-up",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex justify-start items-center gap-2 mb-4",children:[m?e.jsx("input",{type:"text",placeholder:"Search messages...",className:"border border-gray-300 text-sm px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-purple-500",value:o,onChange:s=>N(s.target.value)}):e.jsx("h2",{className:"text-lg font-bold",children:"Messages"}),e.jsx(c,{icon:k,className:"text-gray-500 text-lg cursor-pointer hover:text-purple-600",onClick:()=>v(!m)}),e.jsx(c,{icon:n==="favorite"?C:E,className:"text-gray-500 text-lg cursor-pointer hover:text-purple-600",onClick:()=>b(s=>s==="favorite"?"recent":"favorite"),title:`Sort by ${n==="favorite"?"recent":"favorite"}`})]}),u.length===0?e.jsxs("div",{className:"mt-10 text-center",children:[e.jsx("h3",{className:"text-gray-600 font-bold",children:"You donâ€™t have any messages"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"When you receive a new message, it will appear here."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold mt-4",children:"Recent Matches"}),e.jsx("div",{className:"flex mt-2 space-x-3",children:p.slice(0,5).map((s,r)=>e.jsx("img",{src:s.avatar||"/images/avatar.png",alt:s.name||"User",className:"w-10 h-10 rounded-full border-2 border-green-500"},r))}),e.jsx("div",{className:"mt-4 space-y-4",children:u.map(s=>e.jsxs("div",{className:`flex justify-between items-center px-4 py-3 rounded-lg cursor-pointer ${(a==null?void 0:a.id)===s.id?"bg-purple-100":"bg-gray-50"}`,onClick:()=>y(s),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.avatar,alt:s.name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate w-40",children:s.lastMessage})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-400",children:s.time}),s.unread>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:s.unread})]})]},s.id))})]})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:a.avatar,alt:a.name,className:"w-10 h-10 rounded-full"}),e.jsx("h2",{className:"text-lg font-bold",children:a.name})]}),e.jsxs("div",{className:"relative",ref:i,children:[e.jsx("button",{onClick:w,className:"p-2 focus:outline-none",children:e.jsx(c,{icon:L,className:"text-gray-500 text-lg cursor-pointer"})}),d&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-50",children:[e.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"View Profile"}),e.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-gray-100",children:"Block Profile"}),e.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-gray-100",children:"Report User Profile"})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-4 overflow-y-auto flex-grow p-4",children:[e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"px-4 py-2 rounded-lg bg-gray-200 text-gray-800",children:[e.jsx("p",{children:"Hello Wunmi. Have you seen the latest holographic display technology?"}),e.jsx("p",{className:"text-xs mt-1 text-gray-400",children:"11:25"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"px-4 py-2 rounded-lg bg-[#7D52f4] text-white",children:[e.jsx("p",{children:"Hi Mr Bello, How are you doing? I have a few questions please"}),e.jsx("p",{className:"text-xs mt-1 text-gray-300",children:"12:25"})]})})]}),e.jsxs("div",{className:"flex items-center p-4 border-t",children:[e.jsx("input",{type:"text",placeholder:"Write your message...",className:"flex-grow border border-gray-300 rounded-lg px-4 py-2 focus:outline-none"}),e.jsx("button",{className:"bg-[#7D52f4] text-white px-4 py-2 rounded-lg ml-2",children:e.jsx(c,{icon:O})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"Select a conversation to start chatting"})})})]})]})};export{W as default};
