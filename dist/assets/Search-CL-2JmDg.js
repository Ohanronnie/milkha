import{j as e,r as i}from"./index-BonXIjnK.js";import{A as F}from"./aos-qFhLIK5-.js";import{F as c}from"./index.es-BS6_hyzh.js";import{i as E,n as I,o as T,p as D,q as B,h as W,r as q,s as z,t as G,u as V}from"./index-CokvSRJh.js";import{N as Y}from"./Navbar-DsNlk0xp.js";import{L as J}from"./LikeProfileModal-Yxu6jpve.js";import K from"./ProfileModal-BKt2ngJS.js";import{W as Q}from"./WriteMessageModal-Csqt_TwF.js";import{H as X}from"./HobbiesEditModal-CnZBaFep.js";import{l as Z,s as _,h as $}from"./api-CkpjlVvn.js";import"./index-BPRxkVGZ.js";const p=({isOpen:m,onClose:g,title:n,children:o})=>m?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-opacity-50 bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-[90%] max-w-md shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:n}),e.jsx("button",{onClick:g,className:"text-gray-500 hover:text-red-500 text-xl",children:"×"})]}),e.jsx("div",{children:o}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[e.jsx("button",{onClick:g,className:"px-4 py-2 rounded bg-gray-200 text-gray-800",children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 rounded bg-purple-600 text-white",children:"Apply"})]})]})}):null,de=()=>{const[m,g]=i.useState(""),[n,o]=i.useState(null),[f,j]=i.useState(null),[a,N]=i.useState(null),[v,y]=i.useState(!1),[S,u]=i.useState(!1),[h,M]=i.useState([]),[C,w]=i.useState(!1),[k,L]=i.useState([]),[l,R]=i.useState({ageRanges:[],maritalStatus:[],religion:[],location:[]});i.useEffect(()=>{F.init({duration:800,once:!0}),Z().then(s=>{L(s||[])}).catch(s=>{console.error("Error fetching potential matches:",s.message)})},[]);const x=(s,t)=>{R(r=>{const d=r[s];return{...r,[s]:d.includes(t)?d.filter(b=>b!==t):[...d,t]}})},A=s=>l.ageRanges.length===0?!0:l.ageRanges.some(t=>{const[r,d]=t.split("–").map(b=>parseInt(b));return s.age>=r&&s.age<=d}),O=k.filter(s=>s.name.toLowerCase().includes(m.toLowerCase())&&A(s)&&(l.religion.length===0||l.religion.includes(s.religion))&&(l.location.length===0||l.location.includes(s.location))&&(l.maritalStatus.length===0||l.maritalStatus.includes(s.maritalStatus))&&(h.length===0||h.some(t=>s.hobbies.includes(t)))),H=async s=>{try{await _(s.id),N(s),y(!0)}catch{alert("Failed to like profile.")}},P=async(s,t)=>{try{await $(s,t),alert("✅ Message sent successfully!"),u(!1)}catch(r){alert("❌ Failed to send message: "+r.message)}};return e.jsxs("div",{className:"min-h-screen bg-[#f8f9fb]",children:[e.jsx(Y,{}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsx("div",{"data-aos":"slide-right","data-aos-delay":"500",className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full lg:w-auto",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 bg-white rounded-full px-4 py-2 w-full sm:w-64 shadow-sm",children:[e.jsx(c,{icon:W,className:"text-gray-400 mr-2"}),e.jsx("input",{type:"text",placeholder:"Search profiles...",value:m,onChange:s=>g(s.target.value),className:"outline-none bg-transparent text-sm w-full"})]}),[{icon:E,label:"Age",type:"age",action:()=>o("age")},{icon:I,label:"Marital",type:"marital",action:()=>o("marital")},{icon:T,label:"Religion",type:"religion",action:()=>o("religion")},{icon:D,label:"Hobbies",type:"hobbies",action:()=>w(!0)},{icon:B,label:"Location",type:"location",action:()=>o("location")}].map(({icon:s,label:t,action:r})=>e.jsxs("button",{onClick:r,className:"flex items-center gap-1 hover:scale-103 text-sm border border-gray-300 px-4 py-2 rounded-xl bg-white hover:bg-purple-100 transition",children:[e.jsx(c,{icon:s}),t]},t))]})})}),e.jsx("div",{"data-aos":"fade-up","data-aos-delay":"500",className:"max-w-7xl mx-auto px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 pb-10",children:O.map((s,t)=>e.jsxs("div",{className:"bg-white rounded-xl hover:scale-103 shadow-md hover:shadow-lg transition duration-300 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-3 right-3 bg-white px-3 py-1 rounded-full text-xs text-purple-600 font-semibold shadow-sm flex items-center gap-1",children:[e.jsx(c,{icon:q,className:"text-purple-500 text-xs"}),s.compatibility," COMPATIBLE"]}),e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover rounded-t-xl"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm font-medium text-gray-600",children:[s.age," YRS"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 gap-2",children:[e.jsx(c,{icon:z}),s.location]}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsxs("span",{className:"flex items-center gap-1 text-xs bg-white text-green-700 px-3 py-1 border border-gray-300 rounded-full font-semibold uppercase",children:[e.jsx(c,{icon:G,className:"text-green-400 text-[10px]"}),s.religion]})}),e.jsxs("button",{onClick:()=>j(s),className:"w-full mt-4 bg-[#7d52f4] hover:bg-purple-700 text-white text-sm py-2 rounded-full font-medium flex items-center justify-center gap-2 transition-all duration-300",children:["View Profile ",e.jsx(c,{icon:V})]})]})]},t))}),e.jsx(p,{isOpen:n==="age",onClose:()=>o(null),title:"Age",children:e.jsx("div",{className:"grid grid-cols-3 gap-2 px-4 py-4 text-sm font-semibold",children:["18–20","20–25","25–35","35–50","50–60"].map(s=>e.jsxs("label",{className:"border border-gray-300 rounded-lg px-4 py-2 bg-white cursor-pointer hover:bg-purple-100",children:[s,e.jsx("input",{type:"checkbox",className:"ml-2",checked:l.ageRanges.includes(s),onChange:()=>x("ageRanges",s)})]},s))})}),e.jsx(p,{isOpen:n==="marital",onClose:()=>o(null),title:"Marital",children:e.jsx("div",{className:"grid grid-cols-3 gap-2 px-4 py-4 text-sm font-semibold",children:["Married","Single","Divorced"].map(s=>e.jsxs("label",{className:"border border-gray-300 rounded-lg px-4 py-2 bg-white cursor-pointer hover:bg-purple-100",children:[s,e.jsx("input",{type:"checkbox",className:"ml-2",checked:l.maritalStatus.includes(s),onChange:()=>x("maritalStatus",s)})]},s))})}),e.jsx(p,{isOpen:n==="religion",onClose:()=>o(null),title:"Religion",children:e.jsx("div",{className:"grid grid-cols-3 gap-2 px-4 py-4 text-sm font-semibold",children:["Muslim","Christian","Others"].map(s=>e.jsxs("label",{className:"border border-gray-300 rounded-lg px-4 py-2 bg-white cursor-pointer hover:bg-purple-100",children:[s,e.jsx("input",{type:"checkbox",className:"ml-2",checked:l.religion.includes(s),onChange:()=>x("religion",s)})]},s))})}),e.jsx(p,{isOpen:n==="location",onClose:()=>o(null),title:"Location",children:e.jsx("div",{className:"grid grid-cols-2 gap-2 px-4 py-4 text-sm font-semibold",children:["Dubai","Abu-Dhabi"].map(s=>e.jsxs("label",{className:"border border-gray-300 rounded-lg px-4 py-2 bg-white cursor-pointer hover:bg-purple-100",children:[s,e.jsx("input",{type:"checkbox",className:"ml-2",checked:l.location.includes(s),onChange:()=>x("location",s)})]},s))})}),e.jsx(K,{isOpen:f!==null,onClose:()=>j(null),profile:f,onLike:H}),e.jsx(J,{isOpen:v,likedName:a==null?void 0:a.name,profileImage:a==null?void 0:a.image,onClose:()=>y(!1),onSendMessage:()=>u(!0)}),e.jsx(Q,{isOpen:S,onClose:()=>u(!1),likedName:a==null?void 0:a.name,profileImage:a==null?void 0:a.image,receiverId:a==null?void 0:a.id,onSend:P}),C&&e.jsx(X,{selectedHobbies:h,setSelectedHobbies:M,onClose:()=>w(!1)})]})};export{de as default};
