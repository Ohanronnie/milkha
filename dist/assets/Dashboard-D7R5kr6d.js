import{r as t,j as e}from"./index-BonXIjnK.js";import{N as P}from"./Navbar-DsNlk0xp.js";import{A as S}from"./aos-qFhLIK5-.js";import{F as b}from"./index.es-BS6_hyzh.js";import{d as F,e as I,g as D,h as C,i as O,j as A}from"./index-CokvSRJh.js";import{f as E,g as k,d as _,e as M,s as T,h as U,i as V,j as R}from"./api-CkpjlVvn.js";import W from"./ProfileModal-BKt2ngJS.js";import{L as H}from"./LikeProfileModal-Yxu6jpve.js";import{W as Q}from"./WriteMessageModal-Csqt_TwF.js";import"./index-BPRxkVGZ.js";const Y=()=>{const[p,j]=t.useState("User"),[h,y]=t.useState(0),[a,n]=t.useState(0),[v,x]=t.useState(0);t.useEffect(()=>{S.init({duration:800,once:!0});const i=async()=>{try{const r=await E();j(r.full_name||"User")}catch(r){console.error("Failed to fetch profile:",r.message)}},d=async()=>{try{const r=await k();y(r.length)}catch(r){console.error("Failed to fetch matches:",r.message)}},N=async()=>{try{const r=await _();n(r.length)}catch(r){console.error("Failed to fetch chats:",r.message)}},u=async()=>{try{const r=await M();x(r.length)}catch(r){console.error("Failed to fetch shortlists:",r.message)}};i(),d(),N(),u()},[]);const f=[{icon:F,title:"Matches",value:h},{icon:I,title:"Active Chats",value:a},{icon:D,title:"Shortlisted Profiles",value:v}];return e.jsx("div",{className:"block px-10 py-6 pt-10",children:e.jsxs("div",{"data-aos":"fade-up","data-aos-delay":"100","data-aos-offset":"150","data-aos-duration":"1000","data-aos-easing":"ease-in-out",className:"grid grid-cols-1 lg:grid-cols-[1fr_3fr] gap-6 items-start",children:[e.jsxs("div",{"data-aos":"slide-left","data-aos-delay":"500",children:[e.jsx("h2",{className:"text-lg hover:scale-103 transition font-medium text-gray-600",children:"Welcome back,"}),e.jsx("h2",{className:"text-4xl font-bold text-black mt-1 w-4x1 hover:text-[#a897ff] hover:scale-103 transition",children:p})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:f.map((i,d)=>e.jsxs("div",{className:"bg-white shadow-md hover:scale-103 transition p-6 rounded-lg flex items-left space-x-4 justify-start",children:[e.jsx("div",{className:"bg-[#7D52f4] text-white w-10 h-10 flex items-center justify-center rounded-full",children:e.jsx(b,{icon:i.icon,className:"text-lg"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 font-semibold mt-2",children:i.title}),e.jsx("h2",{className:"text-2xl hover:text-[#a897ff] font-bold text-start mt-3",children:i.value}),e.jsx("hr",{className:"mt-6 border-gray-300"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-start",children:"+4.2% from previous week"})]})]},d))})]})})},B=()=>{const[p,j]=t.useState([]),[h,y]=t.useState([]),[a,n]=t.useState(null),[v,x]=t.useState(!1),[f,i]=t.useState(!1),[d,N]=t.useState(!1),[u,r]=t.useState("");t.useEffect(()=>{S.init({duration:800,once:!0}),w(),l()},[]);const w=async()=>{try{const s=await k();j(s)}catch(s){console.error("❌ Error fetching today's matches:",s.message)}},l=async()=>{try{const s=await M();y(s)}catch(s){console.error("❌ Error fetching shortlisted profiles:",s.message)}},c=async s=>{try{await T(s.id),n(s),x(!0)}catch(g){console.error("❌ Error liking profile:",g.message)}},o=async(s,g)=>{try{await U(s.id,g),i(!1)}catch(L){console.error("❌ Error sending message:",L.message)}},m=h.filter(s=>s.name.toLowerCase().includes(u.toLowerCase()));return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-6 px-10 py-6",children:[e.jsxs("div",{"data-aos":"slide-right",className:"bg-white p-6 rounded-lg shadow-md grid grid-cols-1",children:[e.jsx("h2",{className:"text-lg hover:scale-102 hover:text-[#7d52f4] transition font-bold",children:"Today's Matches"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Based on your preferences"}),e.jsx("div",{"data-aos":"flip-left",className:"relative mt-4",children:e.jsx("div",{className:"overflow-x-auto scrollbar-hide",style:{maxWidth:"100%"},children:e.jsx("div",{className:"flex space-x-4 w-max",children:p.map((s,g)=>e.jsxs("div",{className:"w-56 bg-white shadow-md rounded-lg overflow-hidden flex-shrink-0 hover:scale-105 transition-transform",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover"}),e.jsxs("span",{className:"absolute top-2 right-2 bg-[#7D52f4] text-white text-xs px-2 py-1 rounded-full",children:[s.matchPercentage||s.compatibility||"N/A"," MATCH"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:s.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:s.age}),e.jsx("p",{className:"text-gray-500 text-sm",children:s.location}),e.jsx("button",{onClick:()=>n(s),className:"mt-3 w-full bg-[#7D52f4] text-white text-sm py-2 rounded-lg hover:bg-purple-900",children:"View Profile"})]})]},g))})})})]}),e.jsxs("div",{"data-aos":"slide-left",className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg hover:scale-103 transition hover:text-[#a897ff] font-bold",children:"Shortlisted Profiles"}),e.jsx(b,{icon:C,className:"text-gray-400 text-lg hover:scale-105 cursor-pointer",onClick:()=>N(s=>!s)})]}),d&&e.jsx("input",{type:"text",placeholder:"Search profile...",className:"mt-4 w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-purple-500",value:u,onChange:s=>r(s.target.value)}),e.jsx("div",{"data-aos":"flip-up",className:"mt-4 space-y-4",children:m.length>0?m.map((s,g)=>e.jsxs("div",{className:"flex justify-between hover:scale-105 items-center bg-gray-100 px-3 py-2 rounded-lg hover:bg-gray-200 transition",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsx("button",{onClick:()=>{n(s),i(!0)},className:"text-blue-500 text-sm font-semibold hover:underline",children:"SEND A MESSAGE"})]},g)):e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"No matches found."})})]}),e.jsx(W,{isOpen:a!==null,onClose:()=>n(null),profile:a,onLike:s=>c(s)}),e.jsx(H,{isOpen:v,onClose:()=>x(!1),likedName:a==null?void 0:a.name,profileImage:a==null?void 0:a.image,onSendMessage:()=>{x(!1),i(!0)}}),e.jsx(Q,{isOpen:f,onClose:()=>i(!1),likedName:a==null?void 0:a.name,profileImage:a==null?void 0:a.image,onSendMessage:s=>o(a,s)})]})},G=()=>{const[p,j]=t.useState(!1),[h,y]=t.useState(""),[a,n]=t.useState([]),[v,x]=t.useState([]),[f,i]=t.useState(0),[d,N]=t.useState(!1),[u,r]=t.useState("");t.useEffect(()=>{S.init({duration:800,once:!0}),(async()=>{try{const[c,o,m]=await Promise.all([V(),R(),E()]);n(c||[]),x((o==null?void 0:o.enhancement_suggestions)||[]),i((o==null?void 0:o.completion_percentage)||0),N((o==null?void 0:o.is_visible)||!1),r((m==null?void 0:m.profile_image)||"/images/icon.png")}catch(c){console.error("Error fetching profile data:",c)}})()},[]);const w={VIEWED:{text:"VIEWED YOUR PROFILE",type:"blue"},LIKED:{text:"LIKED YOUR PHOTO",type:"red"},SHORTLISTED:{text:"ADDED YOU TO THEIR SHORTLIST",type:"blue"}};return e.jsxs("div",{"data-aos":"fade-up",className:"grid grid-cols-1 lg:grid-cols-[1.3fr_2fr] gap-6 px-6 py-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg hover:scale-104 transition shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center pb-0",children:[e.jsx("h2",{className:"text-lg font-bold hover:text-[#7d52f4] hover:scale-102 transition flex items-start",children:"Profile Activity Feed"}),p&&e.jsx("input",{type:"text",placeholder:"Search activity...",className:"mt-0 w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-purple-500",value:h,onChange:l=>y(l.target.value)}),e.jsx(b,{icon:C,className:"text-gray-400 text-lg cursor-pointer",onClick:()=>j(l=>!l)})]}),e.jsx("div",{className:"mt-4 space-y-4",children:a.filter(l=>(l.actor_name||"").toLowerCase().includes(h.toLowerCase())||(l.activity_type||"").toLowerCase().includes(h.toLowerCase())).map((l,c)=>{const{text:o,type:m}=w[l.activity_type]||{};return e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 hover:scale-104 rounded-lg px-3 py-2 hover:bg-gray-200 transition-transform",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/images/frame.png",alt:"User",className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"font-medium text-xs",children:l.actor_name||"User"}),e.jsxs("span",{className:"bg-[#cac0ff] text-purple-700 text-xs px-2 py-1 rounded-full",children:[f,"%"]})]}),e.jsx("span",{className:`text-xs font-medium ${m==="blue"?"text-blue-500":"text-red-500"}`,children:o||l.activity_type})]},c)})})]}),e.jsx("div",{className:"p-[1px] rounded-lg hover:scale-102 transition bg-gradient-to-r from-[#693EE0] to-[#FF68B3]",children:e.jsxs("div",{className:"bg-white p-9 rounded-lg shadow-md flex flex-col lg:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6 lg:mb-0",children:[e.jsxs("div",{className:"relative w-44 h-44",children:[e.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",className:"stroke-gray-300",strokeWidth:"8",fill:"none"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",className:"stroke-current text-[#6A3FE1]",strokeWidth:"8",fill:"none",strokeDasharray:"282.74",strokeDashoffset:(100-f)/100*282.74,strokeLinecap:"round",transform:"rotate(-90 50 50)"})]}),e.jsx("img",{src:u,alt:"Profile",className:"absolute hover:scale-103 transition top-5 left-5 w-35 h-35 rounded-full object-cover"})]}),e.jsxs("h3",{className:"text-sm font-bold mt-3",children:[f,"% Complete"]}),e.jsxs("p",{className:"text-black text-sm font-semibold text-center",children:["Your Profile is ",d?"visible":"hidden","."]}),!d&&e.jsx("p",{className:"text-gray-500 text-sm text-center",children:"Complete up to 70% to make it visible to others."})]}),e.jsxs("div",{className:"mt-6 w-full",children:[e.jsxs("h2",{className:"text-lg font-bold hover:text-[#7D52f4] hover:scale-102 transition flex items-center mb-4",children:[e.jsx(b,{icon:O,className:"text-white mr-2 rounded-full px-3 py-3 bg-[#7D52F4]"}),"Profile Enhancement Suggestions"]}),e.jsx("div",{className:"space-y-3",children:v.map((l,c)=>e.jsxs("div",{className:"flex justify-between hover:scale-103 items-center p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-transform",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium m-1 text-xs",children:[l.title,e.jsxs("span",{className:"bg-[#cac0ff] text-purple-700 text-xs px-2 py-1 rounded-full ml-5",children:[l.points||"50"," POINTS"]})]}),e.jsx("p",{className:"text-gray-700 font-semibold text-xs",children:l.description})]}),e.jsx(b,{icon:A,className:"text-gray-400 text-xs"})]},c))})]})]})})]})},ae=()=>e.jsxs("div",{className:"bg-gray-100",children:[e.jsx(P,{}),e.jsx(Y,{}),e.jsx(B,{}),e.jsx(G,{})]});export{ae as default};
