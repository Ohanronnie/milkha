import{r,u as v,j as e}from"./index-BonXIjnK.js";import{B as N}from"./Button-GFzUJEy2.js";import{v as w,r as b}from"./api-CkpjlVvn.js";const k=()=>{const[i,h]=r.useState(["","","","","",""]),[o,d]=r.useState(!1),[m,a]=r.useState(""),[n,f]=r.useState(60),[x,u]=r.useState(!1),g=v(),l=localStorage.getItem("verify_email")||"";r.useEffect(()=>{if(n>0){const t=setTimeout(()=>f(n-1),1e3);return()=>clearTimeout(t)}else u(!0)},[n]);const y=(t,s)=>{if(!/^\d*$/.test(s))return;const c=[...i];c[t]=s,h(c),s!==""&&t<5&&document.getElementById(`code-${t+1}`).focus()},p=async()=>{const t=i.join("");if(t.length!==6){a("Please enter the full 6-digit code.");return}d(!0),a("");try{if(await w(l,t))console.log("Email verified successfully!"),g("/Login");else throw new Error("Verification failed. Please check the code and try again.")}catch(s){a(s.message||"Invalid code. Please try again.")}finally{d(!1)}},j=async()=>{if(x){a("");try{await b(l),f(60),u(!1),a("Verification code resent! Check your email.")}catch{a("Failed to resend code. Please try again.")}}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-2xl flex w-full max-w-4xl overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-1/2 flex flex-col justify-center px-10 py-10",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:"/images/logo3.png",className:"w-45 h-25 cursor-pointer justify-center",alt:"Logo",onClick:()=>g("/")})}),e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Verify your email"}),e.jsxs("p",{className:"text-gray-600 text-sm text-center mt-2",children:["We've sent a verification code to ",e.jsx("strong",{children:l})]}),e.jsx("p",{className:"text-gray-500 text-center text-sm mb-6",children:"Please enter the 6-digit code"}),e.jsx("div",{className:"flex justify-center gap-4 mb-6",children:i.map((t,s)=>e.jsx("input",{id:`code-${s}`,type:"text",maxLength:"1",value:t,onChange:c=>y(s,c.target.value),className:"w-12 h-12 text-xl text-center border border-gray-300 rounded-md focus:outline-none focus:border-purple-500 transition transform focus:scale-110"},s))}),e.jsx(N,{text:o?"Verifying...":"Next",fullWidth:!0,onClick:p,disabled:o}),m&&e.jsx("p",{className:"text-red-500 text-center text-sm mt-2",children:m}),e.jsx("p",{className:"text-center text-sm text-gray-600 mt-4",children:x?e.jsx("button",{onClick:j,className:"text-purple-600 font-semibold",children:"Resend verification code"}):e.jsxs("span",{className:"text-gray-500",children:["Resend code in ",n,"s"]})})]}),e.jsx("div",{className:"hidden md:block w-1/2 relative px-2 py-2",children:e.jsx("img",{src:"/images/vec.png",alt:"Verification",className:"w-full h-full object-cover rounded-l-lg"})})]})})};export{k as default};
