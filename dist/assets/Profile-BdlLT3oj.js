import{r as o,j as e}from"./index-BonXIjnK.js";import{F as f}from"./index.es-BS6_hyzh.js";import{x as H,b as z,y as N,z as L,A as $}from"./index-CokvSRJh.js";import{N as T}from"./Navbar-DsNlk0xp.js";import{y as l}from"./index-BPRxkVGZ.js";import{n as S,f as _,u as w,o as W}from"./api-CkpjlVvn.js";import{H as G}from"./HobbiesEditModal-CnZBaFep.js";import"./aos-qFhLIK5-.js";const R=({bio:x,setBio:m,onClose:h})=>{const[s,g]=o.useState(x),[d,i]=o.useState(!1),u=async()=>{if(!s.trim()){l.error("Bio cannot be empty");return}i(!0);try{await S({bio:s.trim()}),m(s.trim()),l.success("Bio updated successfully!"),h()}catch(p){console.error(p),l.error("Failed to update bio. Please try again.")}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Tell the world about yourself!"}),e.jsx(f,{icon:H,className:"text-gray-500 cursor-pointer",onClick:h})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Write a short bio to let potential matches know who you are."}),e.jsx("textarea",{className:"w-full text-gray-600 h-44 p-2 border border-gray-300 rounded mt-3 focus:outline-none focus:ring-2 focus:ring-purple-500",value:s,maxLength:200,onChange:p=>g(p.target.value)}),e.jsxs("p",{className:"text-gray-400 text-sm text-right",children:[s.length,"/200"]}),e.jsx("button",{className:`w-full text-white py-2 rounded mt-4 transition ${d?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,onClick:u,disabled:d,children:d?"Saving...":"Save"})]})})},O=({onClose:x,currentData:m={},onSave:h})=>{const[s,g]=o.useState({religion:m.religion||"",maritalStatus:m.maritalStatus||"",occupation:m.occupation||""}),[d,i]=o.useState(!1),u=n=>{g({...s,[n.target.name]:n.target.value})},p=async()=>{if(!s.religion||!s.maritalStatus||!s.occupation){l.error("Please fill all fields.");return}i(!0);try{await S({religion:s.religion,marital_status:s.maritalStatus,occupation:s.occupation}),l.success("Personal info updated successfully!"),h&&h(s),x()}catch(n){console.error(n),l.error("Failed to update personal info.")}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-20 z-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up relative",children:[e.jsx("button",{onClick:x,className:"absolute top-4 right-4 text-gray-500 hover:text-red-600 transition",children:e.jsx(f,{icon:z,size:"lg"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Personal Info"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Religion"}),e.jsx("input",{type:"text",name:"religion",value:s.religion,onChange:u,placeholder:"e.g. Islam, Christianity",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Marital Status"}),e.jsxs("select",{name:"maritalStatus",value:s.maritalStatus,onChange:u,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"Never Married",children:"Never Married"}),e.jsx("option",{value:"Divorced",children:"Divorced"}),e.jsx("option",{value:"Widowed",children:"Widowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Occupation"}),e.jsx("input",{type:"text",name:"occupation",value:s.occupation,onChange:u,placeholder:"e.g. Software Engineer",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[e.jsx("button",{onClick:x,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded hover:bg-gray-200 transition",children:"Cancel"}),e.jsx("button",{onClick:p,className:`px-4 py-2 rounded text-white transition ${d?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,disabled:d,children:d?"Saving...":"Save Changes"})]})]})})},Z=()=>{const[x,m]=o.useState(""),[h,s]=o.useState([]),[g,d]=o.useState(""),[i,u]=o.useState([]),[p,n]=o.useState(!1),[P,C]=o.useState(!1),[k,F]=o.useState(!1),[M,I]=o.useState(!1),[r,E]=o.useState({});o.useEffect(()=>{A()},[]);const A=async()=>{try{const a=await _();m(a.bio),E(a),s(a.hobbies),d(a.profileImage),u(a.galleryPhotos||[])}catch{l.error("Failed to fetch profile")}},B=async a=>{const t=a.target.files[0];if(t){const c=new FormData;c.append("photo",t);try{n(!0);const b=await w(c);d(b.url),l.success("Profile photo uploaded")}catch{l.error("Upload failed")}finally{n(!1)}}},y=async(a,t)=>{const c=a.target.files[0];if(c){const b=new FormData;b.append("photo",c);try{n(!0);const j=await w(b),v=[...i];v[t]=j,u(v),l.success("Photo uploaded")}catch{l.error("Photo upload failed")}finally{n(!1)}}},U=async(a,t)=>{try{n(!0),await W(a);const c=i.filter((b,j)=>j!==t);u(c),l.success("Photo deleted")}catch{l.error("Failed to delete photo")}finally{n(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(T,{}),e.jsx("div",{className:"relative bg-gradient-to-b from-[#A897FF] to-[#d7cdff] h-30",children:e.jsx("div",{className:"max-w-6xl mx-auto relative z-10 px-4 sm:px-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-4 pt-20",children:[e.jsxs("div",{className:"relative -mt-30 w-28 h-28 sm:w-32 sm:h-32 md:w-36 md:h-36 group",children:[e.jsx("img",{src:g||"/images/icon.png",alt:"Profile",className:"w-full h-full object-cover rounded-2xl border-6 border-white shadow-xl shadow-gray-400 group-hover:scale-105 transition-transform duration-300"}),e.jsx("label",{htmlFor:"profile-upload",className:"absolute bottom-2 right-2 bg-white p-2 rounded-full shadow cursor-pointer hover:bg-purple-100 transition",children:e.jsx(f,{icon:N,className:"text-purple-600"})}),e.jsx("input",{type:"file",id:"profile-upload",className:"hidden",accept:"image/*",onChange:B})]}),e.jsxs("div",{className:"text-center md:text-left mt-10",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-2",children:[(r==null?void 0:r.full_name)||"User Name",e.jsx(f,{icon:L,className:"text-blue-400"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-x-10 gap-y-2 mt-2 text-sm font-medium text-gray-800",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Gender"}),e.jsx("span",{children:(r==null?void 0:r.gender)||"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Age"}),e.jsx("span",{children:r!=null&&r.age?`${r.age} Years`:"N/A"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Location"}),e.jsx("span",{children:(r==null?void 0:r.location)||"N/A"})]})]})]})]})})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-10 space-y-6 mt-20",children:e.jsxs("div",{className:"bg-white border border-purple-300 rounded-lg px-4 py-4 shadow-md transition-all duration-300 hover:shadow-xl",children:[e.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-700 mb-4",children:"Photos"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[i.map((a,t)=>e.jsxs("div",{className:"relative rounded-lg overflow-hidden group border border-gray-200 hover:shadow-md transition-all duration-300",children:[e.jsx("img",{src:a.url||a,alt:"User",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("label",{htmlFor:`photo-upload-${t}`,className:"absolute bottom-2 right-2 bg-white p-2 rounded-full shadow-md cursor-pointer hover:bg-purple-100 transition",children:e.jsx(f,{icon:N,className:"text-purple-600"})}),e.jsx("input",{type:"file",id:`photo-upload-${t}`,className:"hidden",accept:"image/*",onChange:c=>y(c,t)}),e.jsx("button",{onClick:()=>U(a.id,t),className:"absolute top-2 right-2 bg-white p-2 rounded-full shadow-md text-red-600 hover:bg-red-100 transition",children:e.jsx(f,{icon:$})})]},t)),[...Array(4-i.length)].map((a,t)=>e.jsxs("label",{className:"border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400 text-sm h-32 cursor-pointer hover:border-purple-400 hover:text-purple-600 transition",children:[e.jsx("input",{type:"file",className:"hidden",onChange:c=>y(c,i.length+t)}),"+ Upload Photo"]},t))]})]})}),P&&e.jsx(R,{bio:x,setBio:m,onClose:()=>C(!1)}),k&&e.jsx(G,{hobbies:h,setHobbies:s,onClose:()=>F(!1)}),M&&e.jsx(O,{onClose:()=>I(!1),currentData:{religion:"Hinduism",maritalStatus:"Never Married",occupation:"Entrepreneur"},onSave:a=>console.log("New personal info:",a)})]})};export{Z as default};
